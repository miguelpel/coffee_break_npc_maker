<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>coffee_break npc creator</title>
  </head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <body>
    <div class="app_container">
        <div class="app">
            <h4>Coffee_Break npc creator</h4>
            <hr />
            <div class='character_controller'>
                <div class='character_buttons'>
                    <button>Create Character</button>
                    <button>Load Character</button>
                </div>
                <div class='character_name'>
                    <!-- character name (format: snake_case) -->
                    Character Name:
                    <input id="character_name"/>
                </div>
                <!-- message (warnings) -->
                <div id='messages_view'>

                </div>
            </div>
            <hr />
            <!-- quirks -->
            <div>
                Quirks
                <br />
                <div class="quirk_input_container">
                    <div class="quirk_window">
                        Normal
                        <br />
                        start:
                        <textarea class="quirk_input" id="normal_quirk_input_start" name="Script" rows="5"></textarea>
                        comma:
                        <textarea class="quirk_input" id="normal_quirk_input_comma" name="Script" rows="5"></textarea>
                        end:
                        <textarea class="quirk_input" id="normal_quirk_input_end" name="Script" rows="5"></textarea>
                    </div>
                    <div class="separator"></div>
                    <div class="quirk_window">
                        Aroused
                        <br />
                        start:
                        <textarea class="quirk_input" id="aroused_quirk_input_start" name="Script" rows="5"></textarea>
                        comma:
                        <textarea class="quirk_input" id="aroused_quirk_input_comma" name="Script" rows="5"></textarea>
                        end:
                        <textarea class="quirk_input" id="aroused_quirk_input_end" name="Script" rows="5"></textarea>
                    </div>
                    <div class="separator"></div>
                    <div class="quirk_window">
                        Trusting
                        <br />
                        start:
                        <textarea class="quirk_input" id="trusting_quirk_input_start" name="Script" rows="5"></textarea>
                        comma:
                        <textarea class="quirk_input" id="trusting_quirk_input_comma" name="Script" rows="5"></textarea>
                        end:
                        <textarea class="quirk_input" id="trusting_quirk_input_end" name="Script" rows="5"></textarea>
                    </div>
                    <div class="separator"></div>
                    <div class="quirk_window">
                        Angry
                        <br />
                        start:
                        <textarea class="quirk_input" id="angry_quirk_input_start" name="Script" rows="5"></textarea>
                        comma:
                        <textarea class="quirk_input" id="angry_quirk_input_comma" name="Script" rows="5"></textarea>
                        end:
                        <textarea class="quirk_input" id="angry_quirk_input_end" name="Script" rows="5"></textarea>
                    </div>
                </div>
            </div>
            <hr />
            <!-- script window -->
            <div id="script_window">
                Script
                <br />
                <textarea id="script_input" name="Script" rows="20"></textarea>
            </div>
            <div class="export_container">
                <button>Export Character</button>
            </div>
        </div>
    </div>
    <script>
        const {ipcRenderer} = require('electron')
        // get all the textarea ids and display them

        const inputsIds = []

        inputsIds.push("character_name")
        document.querySelectorAll('textarea').forEach(area => inputsIds.push(area.id))

        console.log(inputsIds)

        // for inputId in inputsIds
        // add event listener onChange ('onChange', onInputChange)
        // onInputChange(e) => {id=e.target.id value = e.target.value}
        // send id and value to main process

        function onInputChange(e) { // get triggered ONLY when you exit the input field
            e.preventDefault()
            const value = e.target.value
            const inputId = e.target.id
            console.log(e.target.id)
            console.log(e.target.value)
            ipcRenderer.send('inputChange', {value, inputId})
        }

        function onFocus(e) {
            console.log('focus')
        }

        const nameInput = document.getElementById(inputsIds[0])
        nameInput.addEventListener('change', onInputChange)
        nameInput.addEventListener('focus', onFocus)

    </script>
  </body>
</html>